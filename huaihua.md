刘建平: 

专网是43段的   公安网是10段的   中间有边界，根据规定无法直接打通 只能打通几个端口

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


chenzhe8:

各位好：
怀化项目和第三方对接在开发完成后现场测试发现在从我们平台去第三方平台进行token校验时候,
因为两个网段不通的关系导致请求无法发出去。现场同事给的意见是网络边界可以对指定端口进行放行来处理。
为了实现指定请求端口功能，我们一方面在调研相关的技术实现，一方面进行相应的测试，
但是在测试过程中又发现几点问题：
1、一旦制定端口，该请求都要经过该端口发送出去，因为端口不能复用，请求只有排队依次发出去；
2、基于网络通信的一些基本原理，端口使用过后需要经过释放，才能被下次请求使用，
而网络层为了保障通信质量，释放是需要时间的，一般默认为4分钟，可以设置改到30秒，
也就是说当有并发请求时，用户至少要等待30秒以上才能打开页面，这肯定是不能让用户接受的。

基于以上考量，我方认为应该基于项目现场的网络环境重新设计对接方案。


-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
蒋东林5:

刘工，这我看到过了，我是这样想的。怀化有个特色，小范围的走双网卡服务器暂时是默认的。
那么能否直接中转方式，如8200→中间件（类似双网域mq）→警务平台来实现？

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
chenzhe8:

如果有双网卡服务器的话，理论上可以在双网卡服务器上部署一个代理服务器，这样平台把请求代理到双网卡服务器，由双网卡服务器转发到警务平台

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

寒假所用到的技术：

完全跨单点域登录技术
web flow技术

cas项目中需要处理的问题：
1，？？？在怀化项目中，残留的问题：如果cas已经登录过，（胡鹏跃登录），app再用蔡益达登录之后，再次访问cas主页，显示的是胡鹏跃，而不是蔡益达？？？

1，需要根据会话ID(即sessionId)能访问到这个session。因为根据前面登出流程说明，认证中心的登出请求不是直接来自连接的浏览器用户，可能来自某应用系统。（所以，应用系统必须保存全局sessionId）
hpyps：
以STId为key，存储在currentHashMap里面，对应的value为一个xml文件，里面有此app对应的全局会话的Id，即TGTId；
而，以TGTId为key，存储在currentHashMap里面，对应的value为一个xml文件，里面有此全局会话已经认证过的app列表（即用STList表示，一个app～一个STId）；

认证中心也必须能够通知注册的系统应用进行登出。（所以，认证中心也应该保存应用系统的局部sessionId）
这些请求，都是系统之间的交互，不经过用户浏览器。系统要有根据sessionId访问session的能力。同时，在认证中心中，还需要维护全局会话ID和已登录系统本地局部会话ID的关系，以便认证中心能够通知已登录的系统进行登出处理。

2,CAS还允许直接校验非login.jsp页面传过来的用户名和密码的校验请求。这个功能是用于非web应用的SSO，这在后面的桌面SSO中会用到的。（https://yq.aliyun.com/articles/338905）
hpyps：对应于海康的remoteLogin登录的流程。remoteLogin还可以进行改造。
